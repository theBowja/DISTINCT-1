doctype html
html
  head
    title createslice
    script(src='https://d3js.org/d3.v5.min.js')
    link(rel='stylesheet', href='https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css')
    link(rel='stylesheet', href='/stylesheets/createslice.css')

    script(src='https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js')
    script(src='https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js')
    script(src='https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.22.2/moment.min.js')

    //- the following is for datetime picker
    script(src='https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datetimepicker/4.17.47/js/bootstrap-datetimepicker.min.js')
    link(rel='stylesheet' href='https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datetimepicker/4.17.47/css/bootstrap-datetimepicker.min.css')

    script(src='/javascripts/createslice.js')

  body
    .flex-container
      .left
        a(href='/dashboard') Dashboard
        br
        .btn-group.btn-group-sm#withDropdown
          button.btn.btn-default(type='button' onclick='listAttachments()' data-toggle='dropdown') load topology 
            span.caret
          ul.dropdown-menu(role='menu')
        br
        if topology
          form#upload(method='post', enctype='multipart/form-data')
            span Upload your ssl certificate and public ssh key
            br
            span 'Choose File' will overwrite what's saved in your session
            br
            br
            span SSL certificate given by GENI certificate manager
            input#pem(type='file', name='pem')
            span#pemname= pemname
            br
            br
            span SSH public key
            input#pub(type='file', name='pub')
            span#pubname= pubname
            br
            br
            span slicename
              span.glyphicon.glyphicon-question-sign(title='must be a unique name across active slices. any conflicts may fail silently.')

            input#slicename(name='slicename')
            br
            br
            .form-group
              span starttime
                span.glyphicon.glyphicon-question-sign(title='the time your slice is to be created') ---
                input#now(type='checkbox', name='now')
                span now
              .input-group.date#starttime
                input.form-control(type='text' class='form-control')
                span.input-group-addon
                  span.glyphicon.glyphicon-calendar
            .form-group
              span endtime
              .input-group.date#endtime
                input.form-control(type='text' class='form-control')
                span.input-group-addon
                  span.glyphicon.glyphicon-calendar
            br
            br
            span#flashmessage(style='display: none;') don't panic

            br
            input#createslicebutton(type='submit', value='Make slice!', name='submit')
      .right

        if topology
          script.
           // var topology = JSON.parse( !{JSON.stringify(topology).replace(/<\//g, "<\\/")} );

          h4= JSON.stringify(topology).replace(/<\//g, "<\\/")
          h4= topology

if topology
  script.
    var topology = JSON.parse( !{JSON.stringify(topology).replace(/<\//g, "<\\/")} );
script.
  TOPOLOC = "#{topoloc}";